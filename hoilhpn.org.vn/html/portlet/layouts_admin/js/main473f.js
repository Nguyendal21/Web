AUI.add("liferay-export-import",function(b){var h=b.Lang;var l=b.Date;var k=10000;var e=/plid_(\d+)/;var d=60000;var j=2000;var g="checked";var a="click";var i="";var f={setter:"_setNode"};var c=b.Component.create({ATTRS:{archivedSetupsNode:f,commentsNode:f,deleteMissingLayoutsNode:f,deletePortletDataNode:f,deletionsNode:f,form:f,incompleteProcessMessageNode:f,layoutSetSettingsNode:f,logoNode:f,processesNode:f,rangeAllNode:f,rangeDateRangeNode:f,rangeLastNode:f,rangeLastPublishNode:f,ratingsNode:f,remoteAddressNode:f,remoteDeletePortletDataNode:f,remotePortNode:f,remotePathContextNode:f,remoteGroupIdNode:f,secureConnectionNode:f,setupNode:f,themeReferenceNode:f,userPreferencesNode:f},AUGMENTS:[Liferay.PortletBase],EXTENDS:b.Base,NAME:"exportimport",prototype:{initializer:function(n){var m=this;m._bindUI();m._layoutsExportTreeOutput=m.byId(n.pageTreeId+"Output");m._initLabels();m._processesResourceURL=n.processesResourceURL;b.later(j,m,m._renderProcesses)},destructor:function(){var m=this;if(m._contentOptionsDialog){m._contentOptionsDialog.destroy()}if(m._globalConfigurationDialog){m._globalConfigurationDialog.destroy()}if(m._globalContentDialog){m._globalContentDialog.destroy()}if(m._pagesDialog){m._pagesDialog.destroy()}if(m._rangeDialog){m._rangeDialog.destroy()}if(m._remoteDialog){m._remoteDialog.destroy()}if(m._scheduledPublishingEventsDialog){m._scheduledPublishingEventsDialog.destroy()}},_bindUI:function(){var s=this;var n=s.get("form");if(n){n.delegate(a,function(y){var x=y.currentTarget.attr("data-portletid");var v=y.currentTarget.attr("data-portlettitle");if(!v){v='\u0043\u1ea5\u0075\u0020\u0068\u00ec\u006e\u0068'}var w=s._getConfigurationDialog(x,v);w.show()},".configuration-link");n.delegate(a,function(x){var w=x.currentTarget.attr("data-portletid");var v=x.currentTarget.attr("data-portlettitle");if(!v){v='\u004e\u1ed9\u0069\u0020\u0064\u0075\u006e\u0067'}var y=s._getContentDialog(w,v);y.show()},".content-link")}var p=s.byId("contentOptionsLink");if(p){p.on(a,function(v){var w=s._getContentOptionsDialog();w.show()})}var q=s.byId("globalConfigurationLink");if(q){q.on(a,function(w){var v=s._getGlobalConfigurationDialog();v.show()})}var t=s.byId("globalContentLink");if(t){t.on(a,function(v){var w=s._getGlobalContentDialog();w.show()})}var u=s.byId("pagesLink");if(u){u.on(a,function(w){var v=s._getPagesDialog();v.show()})}var o=s.byId("rangeLink");if(o){o.on(a,function(w){var v=s._getRangeDialog();v.show()})}var m=s.byId("remoteLink");if(m){m.on(a,function(w){var v=s._getRemoteDialog();v.show()})}var r=s.byId("scheduledPublishingEventsLink");if(r){r.on(a,function(w){var v=s._getScheduledPublishingEventsDialog();v.show()})}},_getConfigurationDialog:function(q,n){var m=this;var o=m.byId("configuration_"+q);var p=o.getData("configurationDialog");if(!p){o.show();p=Liferay.Util.Window.getWindow({dialog:{bodyContent:o,centered:true,height:300,modal:true,render:m.get("form"),toolbars:{footer:[{on:{click:function(r){r.domEvent.preventDefault();m._setConfigurationLabels(q);p.hide()}},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(r){r.domEvent.preventDefault();p.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]},width:400},title:n});o.setData("configurationDialog",p)}return p},_getContentDialog:function(p,o){var n=this;var m=n.byId("content_"+p);var q=m.getData("contentDialog");if(!q){m.show();q=Liferay.Util.Window.getWindow({dialog:{bodyContent:m,centered:true,height:300,modal:true,render:n.get("form"),toolbars:{footer:[{on:{click:function(r){r.domEvent.preventDefault();n._setContentLabels(p);q.hide()}},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(r){r.domEvent.preventDefault();q.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]},width:400},title:o});m.setData("contentDialog",q)}return q},_getContentOptionsDialog:function(){var n=this;var o=n._contentOptionsDialog;if(!o){var m=n.byId("contentOptions");m.show();o=Liferay.Util.Window.getWindow({dialog:{bodyContent:m,centered:true,height:300,modal:true,render:n.get("form"),toolbars:{footer:[{on:{click:function(p){p.domEvent.preventDefault();n._setContentOptionsLabels();o.hide()}},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(p){p.domEvent.preventDefault();o.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]},width:400},title:'\u0043\u006f\u006d\u006d\u0065\u006e\u0074\u0073\u002c\u0020\u0052\u0061\u0074\u0069\u006e\u0067\u0073\u0020\u0061\u006e\u0064\u0020\u0044\u0065\u006c\u0065\u0074\u0069\u006f\u006e\u0073'});n._contentOptionsDialog=o}return o},_getGlobalConfigurationDialog:function(){var m=this;var o=m._globalConfigurationDialog;if(!o){var n=m.byId("globalConfiguration");n.show();o=Liferay.Util.Window.getWindow({dialog:{bodyContent:n,centered:true,height:300,modal:true,render:m.get("form"),toolbars:{footer:[{on:{click:function(p){p.domEvent.preventDefault();m._setGlobalConfigurationLabels();o.hide()}},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(p){p.domEvent.preventDefault();o.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]},width:400},title:'\u0041\u0070\u0070\u006c\u0069\u0063\u0061\u0074\u0069\u006f\u006e\u0020\u0043\u006f\u006e\u0066\u0069\u0067\u0075\u0072\u0061\u0074\u0069\u006f\u006e'});m._globalConfigurationDialog=o}return o},_getGlobalContentDialog:function(){var m=this;var o=m._globalContentDialog;if(!o){var n=m.byId("globalContent");n.show();o=Liferay.Util.Window.getWindow({dialog:{bodyContent:n,centered:true,height:300,modal:true,render:m.get("form"),toolbars:{footer:[{on:{click:function(p){p.domEvent.preventDefault();m._setGlobalContentLabels();o.hide()}},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(p){p.domEvent.preventDefault();o.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]},width:400},title:'\u0054\u006f\u00e0\u006e\u0020\u0062\u1ed9\u0020\u006e\u1ed9\u0069\u0020\u0064\u0075\u006e\u0067'});m._globalContentDialog=o}return o},_getPagesDialog:function(){var n=this;var m=n._pagesDialog;if(!m){var o=n.byId("pages");o.show();m=Liferay.Util.Window.getWindow({dialog:{bodyContent:o,centered:true,modal:true,render:n.get("form"),toolbars:{footer:[{on:{click:function(p){p.domEvent.preventDefault();if(n._layoutsExportTreeOutput){n._reloadForm()}m.hide()}},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(p){p.domEvent.preventDefault();m.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]}},title:'\u0054\u0072\u0061\u006e\u0067'});n._pagesDialog=m}return m},_getRangeDialog:function(){var o=this;var p=o._rangeDialog;if(!p){var n=b.bind("_updateDateRange",o);var m=o.byId("range");m.show();p=Liferay.Util.Window.getWindow({dialog:{bodyContent:m,centered:true,modal:true,render:o.get("form"),toolbars:{footer:[{on:{click:n},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(q){q.domEvent.preventDefault();p.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]}},title:'\u004b\u0068\u006f\u1ea3\u006e\u0067\u0020\u006e\u0067\u00e0\u0079'});p.get("boundingBox").delegate("key",n,"enter",'input[type="text"]');o._rangeDialog=p}return p},_getRemoteDialog:function(){var n=this;var o=n._remoteDialog;if(!o){var m=n.byId("remote");m.show();o=Liferay.Util.Window.getWindow({dialog:{bodyContent:m,centered:true,height:300,modal:true,render:n.get("form"),toolbars:{footer:[{on:{click:function(p){p.domEvent.preventDefault();n._setRemoteLabels();o.hide()}},label:'\u0110\u1ed3\u006e\u0067\u0020\u00fd',primary:true},{on:{click:function(p){p.domEvent.preventDefault();o.hide()}},label:'\u0048\u1ee7\u0079\u0020\u0062\u1ecf'}]},width:400},title:'\u0054\u0068\u0069\u1ebf\u0074\u0020\u006c\u1ead\u0070\u0020\u006b\u1ebf\u0074\u0020\u006e\u1ed1\u0069\u0020\u0074\u0072\u1ef1\u0063\u0020\u0074\u0075\u0079\u1ebf\u006e\u0020\u0074\u1eeb\u0020\u0078\u0061'});n._remoteDialog=o}return o},_getScheduledPublishingEventsDialog:function(){var m=this;var n=m._scheduledPublishingEventsDialog;if(!n){var o=m.byId("scheduledPublishingEvents");o.show();n=Liferay.Util.Window.getWindow({dialog:{bodyContent:o,height:300,centered:true,modal:true,render:m.get("form"),toolbars:{footer:[{on:{click:function(p){p.domEvent.preventDefault();n.hide()}},label:'\u0110\u00f3\u006e\u0067'}]},width:400},title:'\u0053\u1ef1\u0020\u006b\u0069\u1ec7\u006e\u0020\u0074\u0072\u00ea\u006e\u0020\u006c\u1ecb\u0063\u0068'});m._scheduledPublishingEventsDialog=n}return n},_getValue:function(p){var m=this;var o=i;var n=m.get(p);if(n){o=n.val()}return o},_initLabels:function(){var m=this;m.all(".configuration-link").each(function(o,n,p){m._setConfigurationLabels(o.attr("data-portletid"))});m.all(".content-link").each(function(o,n,p){m._setContentLabels(o.attr("data-portletid"))});m._setContentOptionsLabels();m._setGlobalConfigurationLabels();m._setGlobalContentLabels();m._setPageLabels();m._setRangeLabels();m._setRemoteLabels()},_isChecked:function(o){var m=this;var n=m.get(o);return(n&&n.attr(g))},_reloadForm:function(){var m=this;var n=m.byId("cmd");if(n){n.val(i);submitForm(m.get("form"))}},_renderProcesses:function(){var m=this;var n=m.get("processesNode");if(n){new b.TogglerDelegate({animated:true,closeAllOnExpand:true,container:n,content:".background-task-status-message",expanded:false,header:".details-link",on:{"toggler:expandedChange":function(p){var q=p.target.get("header");var o=0;if(!q.hasClass("toggler-header-collapsed")){o=q.getData("persist-id")}Liferay.Store({"background-task-ids":o})}},transition:{duration:0.3}})}if(n&&m._processesResourceURL){b.io.request(m._processesResourceURL,{on:{failure:function(){new Liferay.Notice({closeText:false,content:'\u0059\u00ea\u0075\u0020\u0063\u1ea7\u0075\u0020\u0063\u1ee7\u0061\u0020\u0062\u1ea1\u006e\u0020\u0111\u00e3\u0020\u0111\u01b0\u1ee3\u0063\u0020\u0078\u1eed\u0020\u006c\u00fd\u0020\u006b\u0068\u00f4\u006e\u0067\u0020\u0074\u0068\u00e0\u006e\u0068\u0020\u0063\u00f4\u006e\u0067\u002e'+'<button type="button" class="close">&times;</button>',noticeClass:"hide",timeout:k,toggleText:false,type:"warning",useAnimation:true}).show()},success:function(q,s,r){n.empty();n.plug(b.Plugin.ParseContent);n.setContent(this.get("responseData"));var o=d;var p=!!n.one(".background-task-status-in-progress");if(p){o=j}m._updateincompleteProcessMessage(p,n.one(".incomplete-process-message"));b.later(o,m,m._renderProcesses)}}})}},_setConfigurationLabels:function(p){var m=this;var o=m.byId("configuration_"+p);var n=o.all(".field");var q=[];n.each(function(t,r,u){var s=t.attr(g);if(s){q.push(t.attr("data-name"))}});if(q.length===0){m.byId("PORTLET_CONFIGURATION_"+p+"Checkbox").set("checked",false);m.byId("showChangeConfiguration_"+p).hide()}m._setLabels("configurationLink_"+p,"selectedConfiguration_"+p,q.join(", "))},_setContentLabels:function(q){var n=this;var m=n.byId("content_"+q);var o=m.all(".field");var p=[];o.each(function(t,r,u){var s=t.attr(g);if(s){p.push(t.attr("data-name"))}});if(p.length===0){n.byId("PORTLET_DATA_"+q+"Checkbox").set("checked",false);n.byId("showChangeContent_"+q).hide()}n._setLabels("contentLink_"+q,"selectedContent_"+q,p.join(", "))},_setContentOptionsLabels:function(){var n=this;var o=[];if(n._isChecked("commentsNode")){o.push('\u0043\u00e1\u0063\u0020\u006c\u1edd\u0069\u0020\u0062\u00ec\u006e\u0068')}if(n._isChecked("deletionsNode")){var m=n.get("deletionsNode");o.push(m.attr("data-name"));n.all(".deletions").each(function(q,p,r){q.show()})}else{n.all(".deletions").each(function(q,p,r){q.hide()})}if(n._isChecked("ratingsNode")){o.push('\u0054\u0068\u1ee9\u0020\u0068\u1ea1\u006e\u0067')}n._setLabels("contentOptionsLink","selectedContentOptions",o.join(", "))},_setGlobalConfigurationLabels:function(){var m=this;var n=[];if(m._isChecked("setupNode")){n.push('\u0043\u00e0\u0069\u0020\u0111\u1eb7\u0074')}if(m._isChecked("archivedSetupsNode")){n.push('\u0043\u00e0\u0069\u0020\u0111\u1eb7\u0074\u0020\u006c\u01b0\u0075\u0020\u0074\u0072\u1eef')}if(m._isChecked("userPreferencesNode")){n.push('\u0054\u0069\u00ea\u0075\u0020\u0063\u0068\u0075\u1ea9\u006e\u0020\u006e\u0067\u01b0\u1edd\u0069\u0020\u0064\u00f9\u006e\u0067')}m._setLabels("globalConfigurationLink","selectedGlobalConfiguration",n.join(", "))},_setGlobalContentLabels:function(){var m=this;var n=[];if(m._isChecked("deletePortletDataNode")){n.push('\u0058\u00f3\u0061\u0020\u0064\u1eef\u0020\u006c\u0069\u1ec7\u0075\u0020\u0063\u1ee7\u0061\u0020\u1ee9\u006e\u0067\u0020\u0064\u1ee5\u006e\u0067\u0020\u0028\u0070\u006f\u0072\u0074\u006c\u0065\u0074\u0029\u0020\u0074\u0072\u01b0\u1edb\u0063\u0020\u006b\u0068\u0069\u0020\u0074\u0068\u0075\u0020\u0074\u0068\u1ead\u0070\u0020\u0028\u0069\u006d\u0070\u006f\u0072\u0074\u0029\u002e')}m._setLabels("globalContentLink","selectedGlobalContent",n.join(", "))},_setLabels:function(r,q,p){var m=this;var n=m.byId(r);if(n){if(p!==i){n.html('\u0054\u0068\u0061\u0079\u0020\u0111\u1ed5\u0069')}else{n.html('\u0043\u0068\u1ecd\u006e')}}var o=m.byId(q);if(o){o.html(p)}},_setNode:function(n){var m=this;if(h.isString(n)){n=m.one(n)}else{n=b.one(n)}return n},_setPageLabels:function(){var m=this;var q=[];if(m._layoutsExportTreeOutput){var p=m.byId("layoutIds");var o=m._layoutsExportTreeOutput.getData("treeInstance");var n=o.item(0);if(n.isChecked()){p.val(i);q.push('\u0054\u1ea5\u0074\u0020\u0063\u1ea3\u0020\u0063\u00e1\u0063\u0020\u0074\u0072\u0061\u006e\u0067\u002e')}else{q.push('\u0043\u00e1\u0063\u0020\u0074\u0072\u0061\u006e\u0067\u0020\u0111\u01b0\u1ee3\u0063\u0020\u0063\u0068\u1ecd\u006e')}}if(m._isChecked("deleteMissingLayoutsNode")){q.push('\u0058\u00f3\u0061\u0020\u0063\u00e1\u0063\u0020\u0074\u0072\u0061\u006e\u0067\u0020\u0062\u1ecb\u0020\u006d\u1ea5\u0074')}if(m._isChecked("layoutSetSettingsNode")){q.push('\u0043\u1ead\u0070\u0020\u006e\u0068\u1ead\u0074\u0020\u0063\u1ea5\u0075\u0020\u0068\u00ec\u006e\u0068\u0020\u0074\u0072\u0061\u006e\u0067')}if(m._isChecked("themeReferenceNode")){q.push('\u0043\u1ea5\u0075\u0020\u0068\u00ec\u006e\u0068\u0020\u0067\u0069\u0061\u006f\u0020\u0064\u0069\u1ec7\u006e\u0020\u0028\u0074\u0068\u0065\u006d\u0065\u0029')}if(m._isChecked("logoNode")){q.push('\u0042\u0069\u1ec3\u0075\u0020\u0074\u01b0\u1ee3\u006e\u0067')}m._setLabels("pagesLink","selectedPages",q.join(", "))},_setRangeLabels:function(){var m=this;var n=i;if(m._isChecked("rangeAllNode")){n='\u0054\u1ea5\u0074\u0020\u0063\u1ea3'}else{if(m._isChecked("rangeLastPublishNode")){n='\u004b\u1ec3\u0020\u0074\u1eeb\u0020\u006e\u0067\u00e0\u0079\u0020\u0078\u0075\u1ea5\u0074\u0020\u0062\u1ea3\u006e'}else{if(m._isChecked("rangeDateRangeNode")){n='\u004b\u0068\u006f\u1ea3\u006e\u0067\u0020\u006e\u0067\u00e0\u0079'}else{if(m._isChecked("rangeLastNode")){n='\u0043\u0075\u1ed1\u0069\u0020\u0063\u00f9\u006e\u0067'}}}}m._setLabels("rangeLink","selectedRange",n)},_setRemoteLabels:function(){var m=this;var q=[];var r=m._getValue("remoteAddressNode");if(r!==i){q.push(r)}var p=m._getValue("remotePortNode");if(p!==i){q.push(p)}var o=m._getValue("remotePathContextNode");if(o!==i){q.push(o)}var n=m._getValue("remoteGroupIdNode");if(n!==i){q.push(n)}if(m._isChecked("secureConnectionNode")){q.push('\u0053\u1eed\u0020\u0064\u1ee5\u006e\u0067\u0020\u006b\u1ebf\u0074\u0020\u006e\u1ed1\u0069\u0020\u0062\u1ea3\u006f\u0020\u006d\u1ead\u0074')}if(m._isChecked("remoteDeletePortletDataNode")){q.push('\u0058\u00f3\u0061\u0020\u0064\u1eef\u0020\u006c\u0069\u1ec7\u0075\u0020\u0063\u1ee7\u0061\u0020\u1ee9\u006e\u0067\u0020\u0064\u1ee5\u006e\u0067\u0020\u0028\u0070\u006f\u0072\u0074\u006c\u0065\u0074\u0029\u0020\u0074\u0072\u01b0\u1edb\u0063\u0020\u006b\u0068\u0069\u0020\u0074\u0068\u0075\u0020\u0074\u0068\u1ead\u0070\u0020\u0028\u0069\u006d\u0070\u006f\u0072\u0074\u0029\u002e')}m._setLabels("remoteLink","selectedRemote",q.join(", "))},_updateDateRange:function(m){var z=this;m.preventDefault();var w=z._rangeDialog;var x=true;var r=true;var n=true;if(z._isChecked("rangeDateRangeNode")){var A=Liferay.component(z.ns("startDateDatePicker"));var q=Liferay.component(z.ns("startTimeTimePicker"));var u=Liferay.component(z.ns("endDateDatePicker"));var y=Liferay.component(z.ns("endTimeTimePicker"));var p=A.getDate();var o=q.getTime();p.setHours(o.getHours());p.setMinutes(o.getMinutes());p.setSeconds(0);p.setMilliseconds(0);var t=u.getDate();var s=y.getTime();t.setHours(s.getHours());t.setMinutes(s.getMinutes());t.setSeconds(0);t.setMilliseconds(0);x=l.isGreater(t,p);var v=new Date();r=l.isGreaterOrEqual(v,t);n=l.isGreaterOrEqual(v,p)}if(x&&r&&n){z._reloadForm();b.all(".datepicker-popover, .timepicker-popover").hide();w.hide()}else{var B;if(!x){B='\u0045\u006e\u0064\u0020\u0064\u0061\u0074\u0065\u0020\u006d\u0075\u0073\u0074\u0020\u0062\u0065\u0020\u0067\u0072\u0065\u0061\u0074\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0073\u0074\u0061\u0072\u0074\u0020\u0064\u0061\u0074\u0065\u002e'}else{if(!r||!n){B='\u0053\u0065\u006c\u0065\u0063\u0074\u0065\u0064\u0020\u0064\u0061\u0074\u0065\u0073\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0066\u0075\u0074\u0075\u0072\u0065\u002e'}}if(z._notice){z._notice.remove()}z._notice=new Liferay.Notice({closeText:false,content:B+'<button type="button" class="close">&times;</button>',timeout:10000,toggleText:false,type:"warning"});z._notice.show()}},_updateincompleteProcessMessage:function(n,o){var m=this;var p=m.get("incompleteProcessMessageNode");if(p){o.show();if(n||p.hasClass("in-progress")){p.setContent(o);if(n){p.addClass("in-progress");p.show()}}}}}});Liferay.ExportImport=c},"",{requires:["aui-dialog-iframe-deprecated","aui-io-request","aui-modal","aui-parse-content","aui-toggler","aui-tree-view","liferay-notice","liferay-portlet-base","liferay-store","liferay-util-window"]});